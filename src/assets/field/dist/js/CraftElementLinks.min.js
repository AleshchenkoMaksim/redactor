var plugin=$.extend({},Craft.Redactor.PluginBase,{linkOptions:[],existingText:"",hack:null,start:function(){},showModal:function(arguments,e){let t=arguments.refHandle,i=arguments.callback;const n=Craft.createElementSelectorModal(arguments.elementType,{storageKey:"RedactorInput.LinkTo."+arguments.elementType,sources:arguments.sources,criteria:arguments.criteria,defaultSiteId:this.elementSiteId,onSelect:$.proxy((function(e){if(e.length){let n=e[0],l={url:n.url+"#"+t+":"+n.id+"@"+n.siteId,text:this.existingText.length>0?this.existingText:n.label};this.temporary=i(l)}}),this),closeOtherModals:!1});n.$shade.css("zIndex",e+1),n.$container.css("zIndex",e+2)},setLinkOptions:function(e){this.linkOptions=e},onmodal:{link:{open:function(e,t){this.hack=e.app.editor.focus,e.app.editor.focus=()=>null;const i=$(e.nodes).css("zIndex"),n=$(t.nodes),l=$('<div class="form-item form-item-link-select"><label>Pick a link</label></div>');this.existingText=n.find("input[name=text]").val();for(let e in this.linkOptions){let t=this.linkOptions[e];$('<div class="btn">'+t.optionTitle+"</div>").appendTo(l).on("click",function(e){this.showModal({elementType:t.elementType,refHandle:t.refHandle,sources:t.sources,criteria:t.criteria,callback:e=>{n.find("input[name=url]").val(e.url),n.find("input[name=text]").val(e.text)}},i)}.bind(this))}n.prepend(l)},close:function(e){e.app.editor.focus=this.hack,this.hack=null}}}});Redactor.add("plugin","craftElementLinks",plugin);
//# sourceMappingURL=CraftElementLinks.min.js.map
